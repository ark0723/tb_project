positions_map = {
    "TS01": {
        1: (1206, 356, 598, 75),
        2: (610, 356, 299, 75),
        3: (2103, 356, 226, 74),
        4: (235, 356, 150, 75),
        5: (983, 356, 149, 75),
        6: (1762, 2390, 96, 88),
    },
    "TS02A": {
        1: (1174, 268, 578, 75),
        2: (304, 487, 578, 75),
        3: (1316, 630, 578, 75),
        4: (534, 947, 316, 73),
        5: (594, 267, 290, 73),
        6: (2038, 271, 215, 74),
        7: (1967, 870, 219, 72),
        8: (507, 3169, 219, 73),
        9: (1984, 2282, 219, 73),
        10: (1984, 2124, 219, 72),
        11: (1376, 3174, 216, 72),
        12: (233, 266, 145, 72),
        13: (1977, 1897, 145, 72),
        14: (2164, 1897, 72, 72),
        15: (1665, 3175, 72, 72),
        16: (799, 3170, 72, 72),
    },
    "TS02B": {
        15: (1733, 1517, 300, 567),
        16: (2070, 1517, 300, 567),
        26: (1657, 2494, 150, 780),
        22: (485, 2494, 150, 780),
        21: (284, 2494, 150, 780),
        27: (2020, 2494, 150, 780),
        25: (1457, 2494, 150, 780),
        23: (877, 2494, 150, 780),
        24: (1072, 2494, 150, 780),
        28: (2220, 2494, 150, 780),
        14: (1508, 1517, 150, 567),
        20: (355, 2210, 1124, 71),
        17: (355, 2076, 1124, 71),
        5: (998, 504, 1124, 71),
        12: (1732, 1232, 300, 214),
        13: (2070, 1232, 300, 214),
        6: (260, 654, 600, 71),
        7: (1090, 654, 600, 71),
        3: (1176, 222, 600, 71),
        8: (1018, 865, 600, 71),
        11: (1508, 1232, 150, 214),
        19: (1733, 2150, 300, 71),
        20: (2069, 2148, 300, 71),
        2: (577, 222, 300, 71),
        4: (2071, 228, 220, 71),
        1: (200, 222, 150, 71),
        18: (1508, 2150, 150, 71),
        9: (1018, 1012, 150, 71),
        10: (2222, 1012, 150, 71),
    },
    "TS03": {
        1: (1207, 356, 597, 75),
        2: (610, 356, 300, 76),
        3: (2104, 355, 223, 75),
        4: (235, 356, 150, 76),
    },
    "TS04": {
        1: (232, 270, 144, 75),
        2: (594, 271, 290, 75),
        3: (956, 270, 144, 75),
        4: (1170, 271, 580, 75),
        5: (2040, 272, 219, 75),
        6: (230, 774, 580, 75),
        7: (230, 1205, 580, 75),
        8: (230, 1634, 580, 75),
        9: (230, 2061, 580, 75),
        10: (230, 2562, 580, 75),
        11: (1603, 2566, 290, 75),
        12: (230, 2992, 580, 75),
        13: (1098, 2994, 215, 75),
        14: (1385, 2995, 73, 75),
    },
    "TS05A": {
        1: (1172, 260, 576, 73),
        2: (535, 939, 315, 73),
        3: (1747, 404, 292, 73),
        4: (593, 259, 290, 73),
        5: (1098, 414, 288, 70),
        6: (1982, 2272, 217, 73),
        7: (508, 3162, 217, 72),
        8: (1982, 2113, 217, 72),
        9: (1966, 861, 217, 72),
        10: (1374, 3165, 217, 72),
        11: (2037, 264, 214, 73),
        12: (944, 260, 144, 73),
        13: (232, 259, 144, 72),
        14: (2048, 2777, 144, 72),
        15: (1975, 1888, 144, 71),
        16: (2160, 1888, 72, 71),
        18: (1662, 3165, 72, 71),
        17: (798, 3161, 72, 72),
    },
    "TS05B": {
        1: (2000, 1590, 290, 570),
        2: (1679, 1590, 290, 570),
        3: (1460, 1590, 146, 570),
        4: (967, 563, 1085, 72),
        5: (349, 2153, 1085, 72),
        6: (349, 2290, 1083, 72),
        7: (349, 2153, 1085, 72),
        8: (1678, 1306, 289, 214),
        9: (1140, 291, 580, 72),
        10: (1461, 1306, 145, 214),
        11: (2003, 2227, 288, 72),
        12: (565, 291, 288, 72),
        13: (1679, 2228, 288, 72),
        14: (2006, 296, 213, 71),
        15: (201, 290, 146, 72),
        16: (1462, 2229, 145, 71),
        17: (913, 291, 143, 72),
    },
    "TS06": {
        1: (982, 1081, 1084, 75),
        2: (1458, 2056, 872, 77),
        3: (813, 1992, 576, 74),
        4: (1173, 272, 576, 72),
        5: (960, 1415, 576, 73),
        6: (882, 2563, 576, 73),
        7: (594, 273, 290, 78),
        8: (447, 1210, 218, 72),
        9: (2041, 272, 216, 71),
        10: (231, 273, 145, 72),
        11: (957, 272, 143, 72),
        12: (738, 1209, 73, 72),
    },
}

# Define rules for each form_type
rules_map = {
    "TS01": [
        ((590, 605), (4, 8)),
        ((295, 305), (2, 4)),
        ((220, 230), (5, 3)),
        ((145, 155), (1, 2), lambda x: x <= 250),
        ((60, 90), (3, 2), lambda x: x > 250),
    ],
    "TS02A": [
        ((570, 580), (3, 8), lambda y: y < 300),
        ((290, 320), (2, 4), lambda y: y <= 300),
        ((210, 220), (4, 3), lambda y: y <= 300),
        ((140, 150), (1, 2), lambda x: x < 300),
        ((70, 80), (14, 1), lambda x: x <= 800),
    ],
    "TS02B": [
        ((1120, 1130), (4, 15, 1)),
        ((580, 620), (3, 8, 1), lambda y: y <= 250),
        ((580, 620), (8, 8, 1), lambda y: y >= 800),
        ((580, 620), (6, 8, 1), lambda x, y: 250 < y < 800 and x < 300),
        ((580, 620), (7, 8, 1), lambda x, y: 250 < y < 800 and x >= 300),
        ((280, 320), (15, 4, 8), lambda x, h: 560 <= h <= 580 and x < 1800),
        ((280, 320), (16, 4, 8), lambda x, h: 560 <= h <= 580 and x >= 1800),
        ((280, 320), (12, 4, 3), lambda x, h: 200 <= h <= 230 and x < 1800),
        ((280, 320), (13, 4, 3), lambda x, h: 200 <= h <= 230 and x >= 1800),
        ((280, 320), (2, 4, 1), lambda x, h: h <= 80 and x < 600),
        ((280, 320), (19, 4, 1), lambda x, h: h <= 80 and 1700 <= x <= 1800),
        ((280, 320), (20, 4, 1), lambda x, h: h <= 80 and x > 1800),
        ((200, 230), (4, 3, 1)),
        ((140, 160), (21, 2, 11), lambda x, h: 750 <= h <= 800 and x <= 300),
        ((140, 160), (22, 2, 11), lambda x, h: 750 <= h <= 800 and 300 < x <= 500),
        ((140, 160), (23, 2, 11), lambda x, h: 750 <= h <= 800 and 800 < x <= 950),
        (
            (140, 160),
            (24, 2, 11),
            lambda x, h: 750 <= h <= 800 and 1000 < x <= 1100,
        ),
        (
            (140, 160),
            (25, 2, 11),
            lambda x, h: 750 <= h <= 800 and 1400 < x <= 1500,
        ),
        (
            (140, 160),
            (26, 2, 11),
            lambda x, h: 750 <= h <= 800 and 1600 < x <= 1700,
        ),
        (
            (140, 160),
            (27, 2, 11),
            lambda x, h: 750 <= h <= 800 and 2000 < x <= 2030,
        ),
        ((140, 160), (28, 2, 11), lambda x, h: 750 <= h <= 800 and 2150 < x),
        ((140, 160), (14, 2, 8), lambda h: 560 <= h <= 580),
        ((140, 160), (11, 2, 3), lambda h: 200 <= h <= 230),
        ((140, 160), (1, 2, 1), lambda y, h: h <= 80 and y < 300),
        (
            (140, 160),
            (9, 2, 1),
            lambda x, y, h: h <= 80 and 950 <= y <= 1100 and x < 1200,
        ),
        (
            (140, 160),
            (10, 2, 1),
            lambda x, y, h: h <= 80 and 950 <= y <= 1100 and x >= 1200,
        ),
        (
            (140, 160),
            (18, 2, 1),
            lambda y, h: h <= 80 and (y > 1100 or 300 <= y < 950),
        ),
        ((220, 230), (5, 15, 3)),
    ],
    "TS03": [
        ((580, 620), (4, 8)),
        ((280, 320), (2, 4)),
        ((200, 230), (5, 3)),
        ((145, 155), (1, 2), lambda x: x <= 250),
        ((145, 155), (3, 2), lambda x: x > 250),
    ],
    "TS04": [
        ((560, 620), (4, 8), lambda y: y <= 300),
        ((560, 620), (6, 8), lambda y: 700 <= y <= 800),
        ((560, 620), (7, 8), lambda y: 1150 <= y <= 1250),
        ((560, 620), (8, 8), lambda y: 1600 <= y <= 1700),
        ((560, 620), (9, 8), lambda y: 2000 <= y <= 2100),
        ((560, 620), (10, 8), lambda y: 2500 <= y <= 2600),
        ((560, 620), (12, 8), lambda y: y > 2600),
        ((280, 320), (2, 4), lambda x: x < 600),
        ((280, 320), (11, 4), lambda x: x >= 600),
        ((200, 230), (13, 3), lambda x: x < 1200),
        ((200, 230), (5, 3), lambda x: x >= 1200),
        ((145, 155), (1, 2), lambda x: x <= 300),
        ((145, 155), (3, 2), lambda x: x > 300),
        ((60, 80), (14, 1)),
    ],
    "TS05A": [
        ((570, 580), (4, 8)),
        ((270, 320), (9, 4), lambda x: x <= 540),
        ((270, 320), (2, 4), lambda x: 550 < x <= 600),
        ((270, 320), (6, 4), lambda x: 1000 <= x <= 1100),
        ((270, 320), (7, 4), lambda x: x > 1100),
        ((210, 220), (5, 3), lambda y: y <= 300),
        ((210, 220), (8, 3), lambda y: 850 <= y <= 870),
        ((210, 220), (12, 3), lambda y: 2000 <= y <= 2115),
        ((210, 220), (13, 3), lambda y: 2200 <= y <= 2300),
        ((210, 220), (15, 3), lambda x, y: x <= 550 and y > 2300),
        ((210, 220), (17, 3), lambda x, y: x > 550 and y > 2300),
        ((140, 150), (1, 2), lambda x: x < 250),
        ((140, 150), (3, 2), lambda x: 900 <= x <= 950),
        ((140, 150), (10, 2), lambda x: 1900 <= x <= 1980),
        ((140, 150), (14, 2), lambda x: x > 2000),
        ((65, 80), (16, 1), lambda x: x <= 800),
        ((65, 80), (18, 1), lambda x: 1650 <= x <= 1700),
        ((65, 80), (11, 1), lambda x: x > 1700),
    ],
    "TS05B": [
        ((1000, 1200), (6, 15, 1), lambda y: y < 600),
        ((1000, 1200), (13, 15, 1), lambda y: 2000 < y < 2200),
        ((1000, 1200), (17, 15, 1), lambda y: y >= 2200),
        ((550, 620), (4, 8, 1)),
        ((280, 320), (11, 4, 8), lambda x, h: 560 <= h <= 580 and x < 1700),
        ((280, 320), (12, 4, 8), lambda x, h: 560 <= h <= 580 and x >= 1700),
        ((280, 320), (8, 4, 3), lambda x, h: 200 <= h <= 230 and x < 1700),
        ((280, 320), (9, 4, 3), lambda x, h: 200 <= h <= 230 and x >= 1700),
        ((280, 320), (2, 4, 1), lambda x, h: h <= 80 and x < 600),
        ((280, 320), (15, 4, 1), lambda x, h: h <= 80 and 1600 <= x <= 1800),
        ((280, 320), (16, 4, 1), lambda x, h: h <= 80 and x > 1800),
        ((200, 230), (5, 3, 1)),
        ((140, 160), (10, 2, 8), lambda h: 500 <= h <= 600),
        ((140, 160), (7, 2, 3), lambda h: 200 <= h <= 230),
        ((140, 160), (1, 2, 1), lambda x, h: h <= 80 and x <= 300),
        ((140, 160), (3, 2, 1), lambda x, h: h <= 80 and 850 <= x <= 1000),
        ((140, 160), (14, 2, 1), lambda x, h: h <= 80 and x > 1000),
    ],
    "TS06": [
        ((1000, 1100), (6, 15)),
        ((800, 900), (11, 12)),
        ((550, 620), (4, 8), lambda y: y <= 300),
        ((550, 620), (9, 8), lambda y: 1400 <= y <= 1500),
        ((550, 620), (10, 8), lambda y: 1900 <= y <= 2100),
        ((550, 620), (12, 8), lambda y: y > 2100),
        ((200, 230), (5, 3), lambda y: y <= 300),
        ((200, 230), (7, 3), lambda y: y > 300),
        ((120, 150), (1, 2), lambda x: x <= 300),
        ((120, 150), (3, 2), lambda x: x > 300),
        ((70, 100), (8, 1)),
    ],
}


box_dict = {
    "filter": {
        "TS01": lambda x, y: 200 < y < 400 or 2400 < y < 3200,
        "TS02A": lambda x, y: 200 < y < 1000
        or (1800 < x and 1700 < y < 2500)
        or (y > 3000),
        "TS02B": lambda x, y: 200 < y < 300
        or (x > 800 and 400 < y < 550)
        or (x > 150 and 550 < y < 1100)
        or (x > 1400 and 1100 < y < 2200)
        or (x < 1400 and 2000 < y < 2100)
        or (x < 1400 and 2150 < y < 2300)
        or (x > 200 and 2400 < y < 3200),
        "TS03": lambda x, y: 200 < y < 450 or (2400 < y < 2600),
        "TS04": lambda x, y: 200 < y < 400
        or (x < 1000 and 700 < y < 2200)
        or (2500 < y < 3200),
        "TS05A": lambda x, y: 200 < y < 500
        or (x > 1800 and 800 < y < 900)
        or (900 < y < 1000)
        or (x > 1800 and 1800 < y < 2300)
        or (x > 1900 and 2600 < y < 2900)
        or (3100 < y < 3200),
        "TS05B": lambda x, y: 200 < y < 400
        or (x > 900 and 500 < y < 600)
        or (x > 1300 and 1200 < y < 2300)
        or (2100 < y < 2400),
        "TS06": lambda x, y: x > 150
        and 200 < y < 300
        or (x > 900 and 900 < y < 1100)
        or (1100 < y < 1200)
        or (x > 700 and 1200 < y < 2600),
    },
    "sort": {
        "TS01": [(None, 400), (2400, None)],
        "TS02A": [
            (None, 400),
            (400, 850),
            (850, 1000),
            (1700, 1950),
            (2000, 2150),
            (2150, 2350),
            (3000, None),
        ],
        "TS02B": [
            (None, 300),
            (400, 550),
            (550, 750),
            (750, 900),
            (900, 1100),
            (1100, 1400),
            (1400, 1600),
            (1900, 2100),
            (2100, 2200),
            (2200, 2300),
            (2300, None),
        ],
        "TS03": [(None, 450), (2400, None)],
        "TS04": [
            (None, 350),
            (350, 1000),
            (1000, 1500),
            (1500, 1900),
            (1900, 2400),
            (2400, 2800),
            (2800, None),
        ],
        "TS05A": [
            (None, 300),
            (300, 500),
            (750, 900),
            (900, 1100),
            (1700, 2000),
            (2000, 2200),
            (2200, 2400),
            (2500, 2900),
            (2900, None),
        ],
        "TS05B": [
            (None, 400),
            (400, 700),
            (1100, 1400),
            (1400, 1700),
            (2000, 2250),
            (2250, None),
        ],
        "TS06": [
            (None, 400),
            (900, 1100),
            (1100, 1250),
            (1250, 1500),
            (1800, 2200),
            (2200, None),
        ],
    },
}

circle_dict = {
    "filter": {
        "TS01": lambda x, y: x > 1400 and 800 < y < 2400,
        "TS02A": lambda x, y: x > 1200
        and 400 < y < 600
        or (x < 800 and 700 < y < 800)
        or (x > 1400 and 750 < y < 1000)
        or (x < 800 and 1000 < y < 1100)
        or (x < 1800 and 1150 < y < 1300)
        or (1300 < y < 1500)
        or (1500 < y < 1750)
        or (x < 1200 and 1750 < y < 1900)
        or (x < 1200 and 1900 < y < 2050)
        or (x < 1450 and 2050 < y < 2200)
        or (x < 1450 and 2200 < y < 2400)
        or (2400 < y < 3150),
        "TS02B": lambda x, y: 300 < y < 500
        or (x < 800 and 500 < y < 600)
        or (x < 1450 and 1150 < y < 2100)
        or (x < 1450 and 2150 < y < 2200)
        or (1850 < x < 2000 and 2450 < y < 3300)
        or (650 < x < 850 and 2450 < y < 3300),
        "TS03": lambda x, y: x > 1400 and 800 < y < 2800,
        "TS04": lambda x, y: 400 < y < 650
        or (x > 1000 and 800 < y < 2250)
        or (x < 200 and 600 < y < 3000)
        or (1000 < x < 1400 and 2600 < y < 2750),
        "TS05A": lambda x, y: 500 < y < 650
        or (x < 800 and 750 < y < 850)
        or (1450 < x < 1600 and 800 < y > 1000)
        or (1000 < y < 1750)
        or (x < 1200 and 1850 < y < 2100)
        or (x < 1400 and 2100 < y < 2400)
        or (2400 < y < 2650)
        or (1150 < x < 1550 and 2650 < y < 2900)
        or (2950 < y < 3150),
        "TS05B": lambda x, y: 400 < y < 550
        or (x < 800 and 550 < y < 650)
        or (700 < y < 850)
        or (1000 < x < 1400 and 1250 < y < 2200)
        or (1000 < x < 1400 and 2200 < y < 2300)
        or (x < 300 and 1250 < y < 2300)
        or (2450 < y < 3000),
        "TS06": lambda x, y: 400 < y < 1000
        or (x < 800 and 1000 < y < 1100)
        or (x < 400 and 1300 < y < 2550)
        or (x > 1600 and 1400 < y < 1700)
        or (x > 1850 and 1850 < y < 1950)
        or (x > 1450 and 2600 < y < 3000),
    },
    "sort": {
        "TS01": [
            (None, 900),
            (950, 1100),
            (1150, 1250),
            (1500, 1600),
            (1600, 1700),
            (1700, 1800),
            (1800, 1900),
            (1900, 2000),
            (2000, 2100),
            (2150, 2250),
            (2250, 2400),
        ],
        "TS02A": [
            (None, 600),
            (700, 850),
            (850, 900),
            (900, 1000),
            (1000, 1150),
            (1150, 1300),
            (1300, 1450),
            (1550, 1650),
            (1650, 1750),
            (1800, 1900),
            (1900, 2000),
            (2050, 2200),
            (2250, 2400),
            (2400, 2500),
            (2500, 2600),
            (2600, 2650),
            (2650, 2720),
            (2720, 2800),
            (2800, 2900),
            (2900, 3000),
            (3050, 3150),
            (3150, 3300),
        ],
        "TS02B": [
            (None, 400),
            (400, 500),
            (500, 600),
            (1200, 1300),
            (1300, 1350),
            (1350, 1450),
            (1500, 1570),
            (1570, 1650),
            (1650, 1700),
            (1700, 1800),
            (1800, 1850),
            (1850, 1930),
            (1930, 2000),
            (2000, 2100),
            (2100, 2250),
            (2450, 2550),
            (2550, 2630),
            (2630, 2700),
            (2700, 2770),
            (2770, 2850),
            (2850, 2900),
            (2900, 2970),
            (2970, 3050),
            (3050, 3100),
            (3100, 3200),
            (3200, 3300),
        ],
        "TS03": [
            (None, 950),
            (950, 1050),
            (1050, 1200),
            (1300, 1400),
            (1400, 1600),
            (1600, 1700),
            (1700, 1750),
            (1750, 1830),
            (1830, 1950),
            (1950, 2100),
            (2100, 2200),
            (2600, None),
        ],
        "TS04": [
            (None, 550),
            (550, 750),
            (750, 870),
            (870, 950),
            (950, 1000),
            (1000, 1100),
            (1100, 1200),
            (1200, 1350),
            (1450, 1600),
            (1650, 1800),
            (1900, 2000),
            (2100, 2250),
            (2400, 2500),
            (2600, 2750),
            (2850, 3000),
        ],
        "TS05A": [
            (None, 550),
            (550, 650),
            (750, 850),
            (850, 930),
            (930, 1000),
            (1000, 1150),
            (1150, 1300),
            (1350, 1500),
            (1550, 1650),
            (1650, 1800),
            (1850, 1950),
            (1950, 2050),
            (2100, 2200),
            (2250, 2400),
            (2400, 2500),
            (2500, 2600),
            (2600, 2650),
            (2650, 2700),
            (2700, 2800),
            (2800, 2900),
            (2900, 3000),
            (3050, 3150),
        ],
        "TS05B": [
            (None, 500),
            (500, 550),
            (550, 650),
            (700, 850),
            (1300, 1370),
            (1370, 1450),
            (1450, 1550),
            (1550, 1650),
            (1650, 1720),
            (1720, 1800),
            (1800, 1870),
            (1870, 1950),
            (1950, 2000),
            (2000, 2100),
            (2100, 2200),
            (2200, 2300),
            (2500, 2600),
            (2600, 2680),
            (2680, 2800),
            (2800, 2900),
            (2900, 3000),
        ],
        "TS06": [
            (None, 500),
            (550, 670),
            (670, 750),
            (750, 850),
            (850, 950),
            (950, 1000),
            (1000, 1100),
            (1300, 1500),
            (1500, 1550),
            (1550, 1630),
            (1630, 1700),
            (1700, 1800),
            (1850, 2000),
            (2150, 2300),
            (2400, 2550),
            (2600, 2720),
            (2720, 2820),
            (2820, 2900),
            (2900, None),
        ],
    },
}
